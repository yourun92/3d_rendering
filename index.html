<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>SVG to 3D (Improved Clarity)</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/SVGLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/geometries/TextGeometry.js"></script>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ü–µ–Ω—ã, –∫–∞–º–µ—Ä—ã –∏ —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xf0f0f0);

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000); // –ò–∑–º–µ–Ω–µ–Ω FOV –Ω–∞ 60
        camera.position.z = 50; // –£–≤–µ–ª–∏—á–µ–Ω–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –∫–∞–º–µ—Ä—ã

        const renderer = new THREE.WebGLRenderer({
            antialias: true,
            powerPreference: "high-performance" // –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        });
        renderer.setPixelRatio(window.devicePixelRatio || 1); // –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è —á–µ—Ç–∫–æ—Å—Ç–∏ –Ω–∞ HiDPI —ç–∫—Ä–∞–Ω–∞—Ö
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // –£–ª—É—á—à–µ–Ω–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ (—Å–æ—Ö—Ä–∞–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É)
        const ambientLight = new THREE.AmbientLight(0x404040);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 1.0); // –£–≤–µ–ª–∏—á–µ–Ω–∞ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å
        directionalLight.position.set(1, 1, 1);
        scene.add(directionalLight);

        const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.7); // –£–≤–µ–ª–∏—á–µ–Ω–∞ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å
        directionalLight2.position.set(-1, -1, -0.5); // –ò–∑–º–µ–Ω–µ–Ω —É–≥–æ–ª
        scene.add(directionalLight2);

        // –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;

        // –ó–∞–≥—Ä—É–∑–∫–∞ SVG –∏–∑ —Ñ–∞–π–ª–∞ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        const loader = new THREE.SVGLoader();
        const svgPath = 'svg_file.svg';
        const meshes = [];
        let textMesh = null; // –≥–ª–æ–±–∞–ª—å–Ω–æ, –Ω–∞–¥ create3DFromSVG

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è 3D –º–æ–¥–µ–ª–∏ (—Å —É–ª—É—á—à–µ–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —ç–∫—Å—Ç—Ä—É–∑–∏–∏)
        function create3DFromSVG(svgData) {
            // –£–ª—É—á—à–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–∫—Å—Ç—Ä—É–∑–∏–∏
            const extrudeSettings = {
                depth: 200, // –£–º–µ–Ω—å—à–µ–Ω–∞ –≥–ª—É–±–∏–Ω–∞ –¥–ª—è –ª—É—á—à–µ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏
                bevelEnabled: false, // –í–∫–ª—é—á–µ–Ω —Å–∫–æ—Å
                bevelThickness: 3,
                bevelSize: 1,
                bevelSegments: 3,
                curveSegments: 24 // –£–≤–µ–ª–∏—á–µ–Ω—ã —Å–µ–≥–º–µ–Ω—Ç—ã –∫—Ä–∏–≤—ã—Ö
            };

            const svgGroup = new THREE.Group();

            // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ–º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–æ)
            svgGroup.scale.multiplyScalar(0.3); // –ò–∑–º–µ–Ω–µ–Ω –º–∞—Å—à—Ç–∞–±
            svgGroup.position.x = -30;
            svgGroup.position.y = 10;
            svgGroup.rotation.x = Math.PI;

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ –ø—É—Ç–∏ –≤ SVG (—Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –º–∞—Ç–µ—Ä–∏–∞–ª–æ–º)
            svgData.paths.forEach(path => {
                const shapes = path.toShapes(false);
                const svgFill = path.userData.style.fill || '#00AAFF';
                const color = new THREE.Color(svgFill);

                shapes.forEach(shape => {
                    const geometry = new THREE.ExtrudeGeometry(shape, extrudeSettings);
                    const material = new THREE.MeshPhongMaterial({
                        color: color,
                        side: THREE.DoubleSide,
                        specular: 0x111111, // –î–æ–±–∞–≤–ª–µ–Ω—ã –±–ª–∏–∫–∏
                        shininess: 30, // –î–æ–±–∞–≤–ª–µ–Ω–∞ –≥–ª—è–Ω—Ü–µ–≤–æ—Å—Ç—å
                        flatShading: false // –°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π
                    });

                    const mesh = new THREE.Mesh(geometry, material);
                    svgGroup.add(mesh);
                    meshes.push(mesh);


                });

                // –î–æ–±–∞–≤–ª—è–µ–º —Å–Ω–æ—Å–∫—É, –µ—Å–ª–∏ —ç—Ç–æ path470
                if (path.userData.node && path.userData.node.id === 'path470') {
                    // –¶–µ–Ω—Ç—Ä –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
                    const bbox = new THREE.Box3().setFromObject(svgGroup);
                    const center = bbox.getCenter(new THREE.Vector3());

                    const fontLoader = new THREE.FontLoader();
                    fontLoader.load('fonts/Spell_Regular.json', function(font) {
                        const textGeometry = new THREE.TextGeometry('–î–®–í 100 / 20', {
                            font: font,
                            size: 3,
                            height: 1,
                            curveSegments: 12
                        });

                        const textMaterial = new THREE.MeshBasicMaterial({ color: 0x000000 });
                        textMesh = new THREE.Mesh(textGeometry, textMaterial);

                        textGeometry.computeBoundingBox();
                        const textCenter = textGeometry.boundingBox.getCenter(new THREE.Vector3());
                        textMesh.position.set(center.x - textCenter.x, center.y + 20, center.z + 10);

                        scene.add(textMesh); // –î–æ–±–∞–≤–ª—è–µ–º –≤–Ω–µ svgGroup
                    });
}
            });

            scene.add(svgGroup);

    // üü© –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ (–≤–∏–Ω—Ç) –ø–µ—Ä–µ–¥ –º–æ–¥–µ–ª—å—é
    const boxGeometry = new THREE.BoxGeometry(10, 5, 60);
    const boxMaterial = new THREE.MeshStandardMaterial({ color: 0x999999 });
    const boxMesh = new THREE.Mesh(boxGeometry, boxMaterial);
    boxMesh.position.set(18.8, -0.73, -28); // –ü–æ–∑–∏—Ü–∏—è –ø–µ—Ä–µ–¥ –º–æ–¥–µ–ª—å—é
    scene.add(boxMesh);


  }

        // –ó–∞–≥—Ä—É–∑–∫–∞ SVG —Ñ–∞–π–ª–∞ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        loader.load(
            svgPath,
            function(svgData) {
                create3DFromSVG(svgData);

                function animate() {
                    requestAnimationFrame(animate);
                    controls.update();

                    if (textMesh) {
                        textMesh.lookAt(camera.position);
                    }
                    renderer.render(scene, camera);
                }
                animate();
            },
            function(xhr) {
                console.log((xhr.loaded / xhr.total * 100) + '% loaded');
            },
            function(error) {
                console.error('Error loading SVG:', error);
                document.body.innerHTML = '<div style="padding:20px;color:red">Error loading SVG file. Please check console for details.</div>';
            }
        );

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>